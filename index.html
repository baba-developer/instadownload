<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Snake Pro Elite - Baba Developer</title>
    <style>
        :root { --primary: #4ade80; --gold: #fbbf24; --bg: #020617; }
        body, html { background: var(--bg); margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; height: 100%; display: flex; justify-content: center; align-items: center; }

        /* Professional Loading Screen */
        #loading-screen { position: fixed; inset: 0; background: #000; display: flex; flex-direction: column; justify-content: space-between; align-items: center; z-index: 999; padding: 60px 0; }
        #loading-screen h1 { color: var(--primary); font-size: 42px; letter-spacing: 6px; font-weight: 900; text-shadow: 0 0 20px rgba(74, 222, 128, 0.4); margin: 0; }
        .loader { width: 50px; height: 50px; border: 3px solid #1e293b; border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        .bottom-branding { color: white; font-size: 12px; letter-spacing: 3px; opacity: 0.7; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* UI Elements */
        .overlay { position: absolute; inset: 0; background: rgba(2, 6, 23, 0.96); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 200; backdrop-filter: blur(12px); color: white; }
        .panel { background: rgba(255, 255, 255, 0.03); padding: 30px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); width: 85%; max-width: 320px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .menu-btn { width: 100%; padding: 15px; margin: 10px 0; background: var(--primary); color: #000; border-radius: 12px; font-weight: 800; cursor: pointer; border: none; text-transform: uppercase; transition: 0.2s; }
        .secondary-btn { background: #1e293b; color: white; }

        #top-bar { position: absolute; top: 15px; width: 310px; display: flex; justify-content: space-between; align-items: center; color: white; z-index: 100; font-weight: bold; }
        #snakeCanvas { border: 4px solid #1e293b; background: #000; border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.5); }

        /* Controls */
        .joypad { position: absolute; bottom: 30px; display: grid; grid-template-columns: repeat(3, 75px); gap: 12px; }
        .btn { width: 75px; height: 75px; background: rgba(255,255,255,0.05); border-radius: 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 30px; border: 1px solid rgba(255,255,255,0.1); }
        .btn:active { background: var(--primary); color: black; }

        .shake { animation: shake 0.3s; }
        @keyframes shake { 0%, 100% {transform:translateX(0)} 25% {transform:translateX(-6px)} 75% {transform:translateX(6px)} }
    </style>
</head>
<body id="game-body">

<div id="loading-screen">
    <h1>SNAKE PRO</h1>
    <div class="loader"></div>
    <div class="bottom-branding">POWERED BY <span style="color:var(--primary); font-weight:bold;">BABA-DEVELOPER</span></div>
</div>

<div id="menu-overlay" class="overlay">
    <div class="panel">
        <h1 style="color:var(--primary); margin:0; font-size: 36px;">SNAKE PRO</h1>
        <p style="opacity:0.6; margin-bottom:25px;">HIGH SCORE: <span id="high-score-val" style="color:var(--gold)">0</span></p>
        <button class="menu-btn" onclick="startGame()">Start Game</button>
        <button class="menu-btn secondary-btn" onclick="showSettings()">Settings</button>
        <p style="font-size:10px; margin-top:30px; opacity:0.3; letter-spacing:2px;">BY BABA DEVELOPER</p>
    </div>
</div>

<div id="settings-overlay" class="overlay" style="display:none;">
    <div class="panel">
        <h2 style="margin-top:0; letter-spacing:2px;">SETTINGS</h2>
        <div style="text-align:left; font-size:14px;">
            <label>Difficulty:</label>
            <select id="diff-select" style="width:100%; padding:10px; margin:10px 0; background:#000; color:white; border:1px solid #333;">
                <option value="180">Easy</option>
                <option value="130" selected>Medium</option>
                <option value="80">Hard (Extreme)</option>
            </select>
            <label>Vibration:</label>
            <input type="checkbox" id="vib-toggle" checked>
        </div>
        <button class="menu-btn" onclick="hideSettings()" style="margin-top:20px;">Save Changes</button>
    </div>
</div>

<div id="gameover-overlay" class="overlay" style="display:none;">
    <div class="panel">
        <h1 style="color:#ef4444; margin:0;">CRASHED!</h1>
        <p style="font-size:24px; margin:10px 0;">SCORE: <span id="final-score" style="color:var(--gold)">0</span></p>
        <button class="menu-btn" onclick="startGame()">Play Again</button>
        <button class="menu-btn secondary-btn" onclick="backToMenu()">Main Menu</button>
    </div>
</div>

<div id="top-bar">
    <div style="background:rgba(255,255,255,0.05); padding:5px 15px; border-radius:10px;">Score: <span id="score" style="color:var(--primary)">0</span></div>
    <div onclick="togglePause()" style="cursor:pointer; opacity:0.7;">⏸ PAUSE</div>
</div>

<canvas id="snakeCanvas"></canvas>

<div class="joypad">
    <div class="btn" style="grid-column:2" onclick="setDirection('UP')">↑</div>
    <div class="btn" style="grid-column:1" onclick="setDirection('LEFT')">←</div>
    <div class="btn" style="grid-column:2" onclick="setDirection('DOWN')">↓</div>
    <div class="btn" style="grid-column:3" onclick="setDirection('RIGHT')">→</div>
</div>

<script>
    const canvas = document.getElementById("snakeCanvas");
    const ctx = canvas.getContext("2d");
    const box = 20;
    canvas.width = 300; canvas.height = 400;

    let snake, food, d, score, gameLoop, speed, isGolden = false;
    let particles = [];
    let highScore = localStorage.getItem("snakeHighScore") || 0;

    document.getElementById("high-score-val").innerText = highScore;

    function startGame() {
        speed = parseInt(document.getElementById("diff-select").value);
        snake = [{ x: 140, y: 200 }];
        d = "RIGHT"; score = 0;
        document.getElementById("score").innerText = score;
        document.querySelectorAll('.overlay').forEach(el => el.style.display = 'none');
        spawnFood();
        if(gameLoop) clearInterval(gameLoop);
        gameLoop = setInterval(draw, speed);
    }

    function spawnFood() {
        isGolden = Math.random() < 0.2; // 20% chance for golden food
        food = {
            x: Math.floor(Math.random() * (canvas.width / box)) * box,
            y: Math.floor(Math.random() * (canvas.height / box)) * box
        };
    }

    function createParticles(x, y, color) {
        for(let i=0; i<10; i++) {
            particles.push({
                x: x + box/2, y: y + box/2,
                vx: (Math.random()-0.5)*8, vy: (Math.random()-0.5)*8,
                life: 1.0, color: color
            });
        }
    }

    function draw() {
        // Neon Grid Background
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = "#0a0a0a";
        for(let i=0; i<canvas.width; i+=box) ctx.strokeRect(i, 0, box, canvas.height);
        for(let i=0; i<canvas.height; i+=box) ctx.strokeRect(0, i, canvas.width, box);

        // Draw Particles
        particles.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy; p.life -= 0.05;
            ctx.fillStyle = p.color;
            ctx.globalAlpha = p.life;
            ctx.fillRect(p.x, p.y, 3, 3);
            if(p.life <= 0) particles.splice(i, 1);
        });
        ctx.globalAlpha = 1;

        // Snake
        snake.forEach((part, i) => {
            ctx.fillStyle = (i === 0) ? varColor() : "white";
            ctx.shadowBlur = (i === 0) ? 15 : 0;
            ctx.shadowColor = varColor();
            ctx.beginPath();
            ctx.roundRect(part.x, part.y, box-1, box-1, 6);
            ctx.fill();
            ctx.shadowBlur = 0;
        });

        // Food
        ctx.fillStyle = isGolden ? "#fbbf24" : "#ef4444";
        ctx.shadowBlur = 15; ctx.shadowColor = ctx.fillStyle;
        ctx.beginPath();
        ctx.arc(food.x+box/2, food.y+box/2, isGolden ? 8 : 6, 0, Math.PI*2);
        ctx.fill();
        ctx.shadowBlur = 0;

        let headX = snake[0].x; let headY = snake[0].y;
        if (d == "LEFT") headX -= box; if (d == "UP") headY -= box;
        if (d == "RIGHT") headX += box; if (d == "DOWN") headY += box;

        if (headX < 0 || headX >= canvas.width || headY < 0 || headY >= canvas.height || snake.some(p => p.x === headX && p.y === headY)) return gameOver();

        if (headX == food.x && headY == food.y) {
            let points = isGolden ? 5 : 1;
            score += points;
            createParticles(food.x, food.y, isGolden ? "#fbbf24" : "#ef4444");
            document.getElementById("score").innerText = score;
            if(score > highScore) { highScore = score; localStorage.setItem("snakeHighScore", highScore); }
            spawnFood();
        } else { snake.pop(); }
        snake.unshift({ x: headX, y: headY });
    }

    function varColor() { return isGolden ? "#fbbf24" : "#4ade80"; }

    function gameOver() {
        clearInterval(gameLoop);
        if(document.getElementById("vib-toggle").checked && navigator.vibrate) navigator.vibrate(200);
        document.getElementById("game-body").classList.add("shake");
        setTimeout(() => document.getElementById("game-body").classList.remove("shake"), 300);
        document.getElementById("final-score").innerText = score;
        document.getElementById("gameover-overlay").style.display = "flex";
    }

    function setDirection(n) {
        if (n == "LEFT" && d != "RIGHT") d = "LEFT";
        if (n == "UP" && d != "DOWN") d = "UP";
        if (n == "RIGHT" && d != "LEFT") d = "RIGHT";
        if (n == "DOWN" && d != "UP") d = "DOWN";
    }

    function showSettings() { document.getElementById("settings-overlay").style.display = "flex"; }
    function hideSettings() { document.getElementById("settings-overlay").style.display = "none"; }
    function backToMenu() { document.getElementById("gameover-overlay").style.display = "none"; document.getElementById("menu-overlay").style.display = "flex"; }
    function togglePause() { alert("Game Paused. Click OK to Resume."); }

    window.onload = () => setTimeout(() => document.getElementById('loading-screen').style.display = 'none', 2500);
</script>
</body>
</html>
