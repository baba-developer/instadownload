<!DOCTYPE html>
<html>
<head>
    <title>Helix Stack Jump - Clone</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui">Score: <span id="score">0</span></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Basic Setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Lighting
        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 5, 5).normalize();
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // Central Pillar
        const pillarGeo = new THREE.CylinderGeometry(0.5, 0.5, 40, 32);
        const pillarMat = new THREE.MeshPhongMaterial({ color: 0x444444 });
        const pillar = new THREE.Mesh(pillarGeo, pillarMat);
        scene.add(pillar);

        // Ball
        const ballGeo = new THREE.SphereGeometry(0.2, 32, 32);
        const ballMat = new THREE.MeshPhongMaterial({ color: 0xff0000 });
        const ball = new THREE.Mesh(ballGeo, ballMat);
        ball.position.set(0, 2, 1.2);
        scene.add(ball);

        // Platforms (Rings)
        const platforms = [];
        for (let i = 0; i < 15; i++) {
            const group = new THREE.Group();
            for (let j = 0; j < 8; j++) {
                if (Math.random() > 0.3) { // Create gaps
                    const partGeo = new THREE.CylinderGeometry(2, 2, 0.2, 12, 1, false, (j * Math.PI) / 4, Math.PI / 4.5);
                    const partMat = new THREE.MeshPhongMaterial({ color: Math.random() * 0xffffff });
                    const part = new THREE.Mesh(partGeo, partMat);
                    group.add(part);
                }
            }
            group.position.y = -i * 3;
            scene.add(group);
            platforms.push(group);
        }

        camera.position.z = 8;
        camera.position.y = 5;
        camera.lookAt(0, 0, 0);

        // Game Logic Variables
        let dy = 0;
        let score = 0;
        let rotationSpeed = 0;

        // Controls
        window.addEventListener('mousedown', () => rotationSpeed = 0.05);
        window.addEventListener('mouseup', () => rotationSpeed = 0);
        window.addEventListener('touchstart', () => rotationSpeed = 0.05);
        window.addEventListener('touchend', () => rotationSpeed = 0);

        function animate() {
            requestAnimationFrame(animate);

            // Ball Gravity & Bounce
            dy -= 0.01;
            ball.position.y += dy;

            if (ball.position.y < 0.2) {
                dy = 0.15; // Bounce effect
            }

            // Rotate Platforms
            platforms.forEach(p => p.rotation.y += rotationSpeed);

            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
